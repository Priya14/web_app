!!!
%html{:lang => "en"}
  %head
    %title Lateral On-Scroll Sliding with jQuery
    %meta{:charset => "UTF-8"}/
    %meta{:content => "IE=edge,chrome=1", "http-equiv" => "X-UA-Compatible"}
      %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}
        %meta{:content => "Lateral On-Scroll Sliding with jQuery - Timeline Example with CSS3", :name => "description"}/
        %meta{:content => "lateral, sides, slide, scroll, jquery, css3, timeline", :name => "keywords"}/
        %meta{:content => "Codrops", :name => "author"}/
        %link{:href => "../favicon.ico", :rel => "shortcut icon"}
          %link{:href => "/assets/demo.css", :rel => "stylesheet", :type => "text/css"}/
          %link{:href => "/assets/style.css", :rel => "stylesheet", :type => "text/css"}/
          %link{:href => "http://fonts.googleapis.com/css?family=Kelly+Slab", :rel => "stylesheet", :type => "text/css"}/
          %script{:src => "/assets/modernizr.custom.11333.js", :type => "text/javascript"}
  %body
    .container
      .header
        %span.right
        .clr
      .demos
      %h1 Lateral On-Scroll Sliding with jQuery
      %h2.ss-subtitle Codrops Timeline
      %span.pull-right
        #ss-links.ss-links.pull-right
          %a{:href => "#november"} Nov
          %a{:href => "#october"} Oct
          %a{:href => "#september"} Sep
          %a{:href => "#august"} Aug
          %a{:href => "#july"} Jul
          %a{:href => "#june"} Jun
      #ss-container.ss-container
        .ss-row
          .ss-left
            %h2#november November
          .ss-right
            %h2 2011
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-1{:href => "http://tympanus.net/Tutorials/TypographyEffects/"} Typography Effects with CSS3 and jQuery
          .ss-right
            %h3
              %span November 28, 2011
              %a{:href => "http://tympanus.net/Tutorials/TypographyEffects/"} Typography Effects with CSS3 and jQuery
        .ss-row.ss-large
          .ss-left
            %h3
              %span November 22, 2011
              %a{:href => "http://tympanus.net/Development/HoverClickTriggerCircle/"} Hover and Click Trigger for Circular Elements with jQuery
          .ss-right
            %a.ss-circle.ss-circle-2{:href => "http://tympanus.net/Development/HoverClickTriggerCircle/"} Hover and Click Trigger for Circular Elements with jQuery
        .ss-row.ss-small
          .ss-left
            %a.ss-circle.ss-circle-3{:href => "http://tympanus.net/Tutorials/ElasticSlideshow/"} Elastic Image Slideshow with Thumbnail Preview
          .ss-right
            %h3
              %span November 21, 2011
              %a{:href => "http://tympanus.net/Tutorials/ElasticSlideshow/"} Elastic Image Slideshow with Thumbnail Preview
        .ss-row.ss-medium
          .ss-left
            %h3
              %span November 18, 2011
              %a{:href => "http://tympanus.net/Development/FullscreenImageBlurEffect/"} Fullscreen Image Blur Effect with HTML5
          .ss-right
            %a.ss-circle.ss-circle-4{:href => "http://tympanus.net/Development/FullscreenImageBlurEffect/"} Fullscreen Image Blur Effect with HTML5
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-5{:href => "http://tympanus.net/Tutorials/InteractiveTypographyEffects/"} Interactive Typography Effects with HTML5
          .ss-right
            %h3
              %span November 9, 2011
              %a{:href => "http://tympanus.net/Tutorials/InteractiveTypographyEffects/"} Interactive Typography Effects with HTML5
        .ss-row.ss-small
          .ss-left
            %a.ss-circle.ss-circle-6{:href => "http://tympanus.net/Tutorials/AnimatedButtons/"} Animated Buttons with CSS3
          .ss-right
            %h3
              %span November 7, 2011
              %a{:href => "http://tympanus.net/Tutorials/AnimatedButtons/"} Animated Buttons with CSS3
        .ss-row.ss-medium
          .ss-left
            %h3
              %span November 2, 2011
              %a{:href => "http://tympanus.net/Tutorials/OriginalHoverEffects/"} Original Hover Effects with CSS3
          .ss-right
            %a.ss-circle.ss-circle-7{:href => "http://tympanus.net/Tutorials/OriginalHoverEffects/"} Original Hover Effects with CSS3
        .ss-row
          .ss-left
            %h2#october October
          .ss-right
            %h2 2011
        .ss-row.ss-small
          .ss-left
            %h3
              %span October 31, 2011
              %a{:href => "http://tympanus.net/Development/FullscreenImage3DEffect/"} Fullscreen Image 3D Effect with CSS3 and jQuery
          .ss-right
            %a.ss-circle.ss-circle-8{:href => "http://tympanus.net/Development/FullscreenImage3DEffect/"} Fullscreen Image 3D Effect with CSS3 and jQuery
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-9{:href => "http://tympanus.net/Tutorials/CreativeCSS3AnimationMenus/"} Creative CSS3 Animation Menus
          .ss-right
            %h3
              %span October 24, 2011
              %a{:href => "http://tympanus.net/Tutorials/CreativeCSS3AnimationMenus/"} Creative CSS3 Animation Menus
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-10{:href => "http://tympanus.net/Tutorials/BlurMenu/"} Blur Menu with CSS3 Transitions
          .ss-right
            %h3
              %span October 19, 2011
              %a{:href => "http://tympanus.net/Tutorials/BlurMenu/"} Blur Menu with CSS3 Transitions
        .ss-row.ss-large
          .ss-left
            %h3
              %span October 17, 2011
              %a{:href => "http://tympanus.net/Development/WaveDisplayEffect/"} Wave Display Effect with jQuery
          .ss-right
            %a.ss-circle.ss-circle-11{:href => "http://tympanus.net/Development/WaveDisplayEffect/"} Wave Display Effect with jQuery
        .ss-row.ss-small
          .ss-left
            %a.ss-circle.ss-circle-12{:href => "http://tympanus.net/Tutorials/FlexibleSlideToTopAccordion/"} Flexible Slide-to-top Accordion
          .ss-right
            %h3
              %span October 12, 2011
              %a{:href => "http://tympanus.net/Tutorials/FlexibleSlideToTopAccordion/"} Flexible Slide-to-top Accordion
        .ss-row.ss-medium
          .ss-left
            %h3
              %span October 10, 2011
              %a{:href => "http://tympanus.net/Tutorials/CircleNavigationEffect/"} Circle Navigation Effect with CSS3
          .ss-right
            %a.ss-circle.ss-circle-13{:href => "http://tympanus.net/Tutorials/CircleNavigationEffect/"} Circle Navigation Effect with CSS3
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-14{:href => "http://tympanus.net/Tutorials/DraggableImageBoxesGrid/"} Draggable Image Boxes Grid
          .ss-right
            %h3
              %span October 7, 2011
              %a{:href => "http://tympanus.net/Tutorials/DraggableImageBoxesGrid/"} Draggable Image Boxes Grid
        .ss-row
          .ss-left
            %h2#september September
          .ss-right
            %h2 2011
        .ss-row.ss-small
          .ss-left
            %h3
              %span September 30, 2011
              %a{:href => "http://tympanus.net/Tutorials/ScrollbarVisibility/"} Scrollbar Visibility with jScrollPane
          .ss-right
            %a.ss-circle.ss-circle-15{:href => "http://tympanus.net/Tutorials/ScrollbarVisibility/"} Scrollbar Visibility with jScrollPane
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-16{:href => "http://tympanus.net/Development/MultiLevelPhotoMap/"} Multi-level Photo Map
          .ss-right
            %h3
              %span September 27, 2011
              %a{:href => "http://tympanus.net/Development/MultiLevelPhotoMap/"} Multi-level Photo Map
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-17{:href => "http://tympanus.net/Tutorials/ResponsiveImageGallery/"} Responsive Image Gallery with Thumbnail Carousel
          .ss-right
            %h3
              %span September 20, 2011
              %a{:href => "http://tympanus.net/Tutorials/ResponsiveImageGallery/"} Responsive Image Gallery with Thumbnail Carousel
        .ss-row.ss-small
          .ss-left
            %h3
              %span September 12, 2011
              %a{:href => "http://tympanus.net/Development/Elastislide/"} Elastislide - A Responsive jQuery Carousel Plugin
          .ss-right
            %a.ss-circle.ss-circle-18{:href => "http://tympanus.net/Development/Elastislide/"} Elastislide - A Responsive jQuery Carousel Plugin
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-19{:href => "http://tympanus.net/Development/Slicebox/"} Slicebox - A fresh 3D image slider with graceful fallback
          .ss-right
            %h3
              %span September 5, 2011
              %a{:href => "http://tympanus.net/Development/Slicebox/"} Slicebox - A fresh 3D image slider with graceful fallback
        .ss-row
          .ss-left
            %h2#august August
          .ss-right
            %h2 2011
        .ss-row.ss-large
          .ss-left
            %h3
              %span August 30, 2011
              %a{:href => "http://tympanus.net/Development/AutomaticImageMontage/"} Automatic Image Montage with jQuery
          .ss-right
            %a.ss-circle.ss-circle-20{:href => "http://tympanus.net/Development/AutomaticImageMontage/"} Automatic Image Montage with jQuery
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-21{:href => "http://tympanus.net/Development/ImageZoomTour/"} Image Zoom Tour with jQuery
          .ss-right
            %h3
              %span August 23, 2011
              %a{:href => "http://tympanus.net/Development/ImageZoomTour/"} Image Zoom Tour with jQuery
        .ss-row.ss-small
          .ss-left
            %h3
              %span August 16, 2011
              %a{:href => "http://tympanus.net/Development/CircularContentCarousel/"} Circular Content Carousel with jQuery
          .ss-right
            %a.ss-circle.ss-circle-22{:href => "http://tympanus.net/Development/CircularContentCarousel/"} Circular Content Carousel with jQuery
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-23{:href => "http://tympanus.net/Tutorials/PortfolioImageNavigation/"} Portfolio Image Navigation with jQuery
          .ss-right
            %h3
              %span August 9, 2011
              %a{:href => "http://tympanus.net/Tutorials/PortfolioImageNavigation/"} Portfolio Image Navigation with jQuery
        .ss-row.ss-medium
          .ss-left
            %h3
              %span August 4, 2011
              %a{:href => "http://tympanus.net/Development/FullscreenGridPortfolioTemplate/"} Expanding Fullscreen Grid Portfolio
          .ss-right
            %a.ss-circle.ss-circle-24{:href => "http://tympanus.net/Development/FullscreenGridPortfolioTemplate/"} Expanding Fullscreen Grid Portfolio
        .ss-row
          .ss-left
            %h2#july July
          .ss-right
            %h2 2011
        .ss-row.ss-small
          .ss-left
            %a.ss-circle.ss-circle-25{:href => "http://tympanus.net/Development/ContentRotator/example1.html"} Content Rotator with jQuery
          .ss-right
            %h3
              %span July 29, 2011
              %a{:href => "http://tympanus.net/Development/ContentRotator/example1.html"} Content Rotator with jQuery
        .ss-row.ss-large
          .ss-left
            %h3
              %span July 22, 2011
              %a{:href => "http://tympanus.net/Development/VerticalSlidingAccordion/example1.html"} Vertical Sliding Accordion with jQuery
          .ss-right
            %a.ss-circle.ss-circle-26{:href => "http://tympanus.net/Development/VerticalSlidingAccordion/example1.html"} Vertical Sliding Accordion with jQuery
        .ss-row.ss-medium
          .ss-left
            %a.ss-circle.ss-circle-27{:href => "http://tympanus.net/Tutorials/AnimatedTextIconMenu/example1.html"} Animated Text and Icon Menu with jQuery
          .ss-right
            %h3
              %span July 12, 2011
              %a{:href => "http://tympanus.net/Tutorials/AnimatedTextIconMenu/example1.html"} Animated Text and Icon Menu with jQuery
        .ss-row.ss-small
          .ss-left
            %h3
              %span July 5, 2011
              %a{:href => "http://tympanus.net/Tutorials/FullscreenSlideshowAudio/"} Fullscreen Slideshow with HTML5 Audio and jQuery
          .ss-right
            %a.ss-circle.ss-circle-30{:href => "http://tympanus.net/Tutorials/FullscreenSlideshowAudio/"} Fullscreen Slideshow with HTML5 Audio and jQuery
        .ss-row.ss-large
          .ss-left
            %a.ss-circle.ss-circle-28{:href => "http://tympanus.net/Development/SlidingBackgroundImageMenu/example5.html"} Sliding Background Image Menu with jQuery
          .ss-right
            %h3
              %span July 3, 2011
              %a{:href => "http://tympanus.net/Development/SlidingBackgroundImageMenu/example5.html"} Sliding Background Image Menu with jQuery
        .ss-row
          .ss-left
            %h2#june June
          .ss-right
            %h2 2011
        .ss-row.ss-small
          .ss-left
            %h3
              %span June 9, 2011
              %a{:href => "http://tympanus.net/Development/GridNavigationEffects/example5.html"} Grid Navigation Effects with jQuery
          .ss-right
            %a.ss-circle.ss-circle-29{:href => "http://tympanus.net/Development/GridNavigationEffects/example5.html"} Grid Navigation Effects with jQuery
    %script{:src => "http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", :type => "text/javascript"}
    %script{:src => "/assets/jquery.easing.1.3.js", :type => "text/javascript"}
    :javascript
          $(function() {
          var $sidescroll = (function() {
          // the row elements
          var $rows= $('#ss-container > div.ss-row'),
          // we will cache the inviewport rows and the outside viewport rows
          $rowsViewport, $rowsOutViewport,
          // navigation menu links
          $links = $('#ss-links > a'),
          // the window element
          $win = $(window),
          // we will store the window sizes here
          winSize = {},
          // used in the scroll setTimeout function
          anim = false,
          // page scroll speed
          scollPageSpeed = 2000 ,
          // page scroll easing
          scollPageEasing = 'easeInOutExpo',
          // perspective?
          hasPerspective = false,
          
          perspective = hasPerspective && Modernizr.csstransforms3d,
          // initialize function
          init = function() {
          
          // get window sizes
          getWinSize();
          // initialize events
          initEvents();
          // define the inviewport selector
          defineViewport();
          // gets the elements that match the previous selector
          setViewportRows();
          // if perspective add css
          if( perspective ) {
          $rows.css({
          '-webkit-perspective'			: 600,
          '-webkit-perspective-origin'	: '50% 0%'
          });
          }
          // show the pointers for the inviewport rows
          $rowsViewport.find('a.ss-circle').addClass('ss-circle-deco');
          // set positions for each row
          placeRows();
          
          },
          // defines a selector that gathers the row elems that are initially visible.
          // the element is visible if its top is less than the window's height.
          // these elements will not be affected when scrolling the page.
          defineViewport	= function() {
          
          $.extend( $.expr[':'], {
          
          inviewport	: function ( el ) {
          if ( $(el).offset().top < winSize.height ) {
          return true;
          }
                                    return false;
                                    }

                                    });

                                    },
                                    // checks which rows are initially visible
                                    setViewportRows	= function() {

                                    $rowsViewport 		= $rows.filter(':inviewport');
                                    $rowsOutViewport	= $rows.not( $rowsViewport )

                                    },
                                    // get window sizes
                                    getWinSize		= function() {

                                    winSize.width	= $win.width();
                                    winSize.height	= $win.height();

                                    },
                                    // initialize some events
                                    initEvents		= function() {

                                    // navigation menu links.
                                    // scroll to the respective section.
                                    $links.on( 'click.Scrolling', function( event ) {

                                    // scroll to the element that has id = menu's href
                                    $('html, body').stop().animate({
                                    scrollTop: $( $(this).attr('href') ).offset().top
                                    }, scollPageSpeed, scollPageEasing );

                                    return false;

                                    });

                                    $(window).on({
                                    // on window resize we need to redefine which rows are initially visible (this ones we will not animate).
                                    'resize.Scrolling' : function( event ) {

                                    // get the window sizes again
                                    getWinSize();
                                    // redefine which rows are initially visible (:inviewport)
                                    setViewportRows();
                                                                // remove pointers for every row
                                    $rows.find('a.ss-circle').removeClass('ss-circle-deco');
                                    // show inviewport rows and respective pointers
                                    $rowsViewport.each( function() {

                                    $(this).find('div.ss-left')
                                    .css({ left   : '0%' })
                                    .end()
                                    .find('div.ss-right')
                                    .css({ right  : '0%' })
                                    .end()
                                    .find('a.ss-circle')
                                    .addClass('ss-circle-deco');

                                    });

                                    },
                                    // when scrolling the page change the position of each row
                                    'scroll.Scrolling' : function( event ) {

                                    // set a timeout to avoid that the
                                    // placeRows function gets called on every scroll trigger
                                    if( anim ) return false;
                                    anim = true;
                                    setTimeout( function() {

                                    placeRows();
                                    anim = false;

                                    }, 10 );

                                    }
                                    });

                                    },
                                        // sets the position of the rows (left and right row elements).
                                    // Both of these elements will start with -50% for the left/right (not visible)
                                    // and this value should be 0% (final position) when the element is on the
                                    // center of the window.
                                        placeRows		= function() {

                                    // how much we scrolled so far
                                    var winscroll	= $win.scrollTop(),
                                    // the y value for the center of the screen
                                                        winCenter	= winSize.height / 2 + winscroll;

                                    // for every row that is not inviewport
                                    $rowsOutViewport.each( function(i) {

                                                        var $row	= $(this),
                                    // the left side element
                                    $rowL	= $row.find('div.ss-left'),
                                    // the right side element
                                                                $rowR	= $row.find('div.ss-right'),
                                    // top value
                                    rowT	= $row.offset().top;

                                    // hide the row if it is under the viewport
                                    if( rowT > winSize.height + winscroll ) {

                                                                if( perspective ) {

            $rowL.css({
            '-webkit-transform'	: 'translate3d(-75%, 0, 0) rotateY(-90deg) translate3d(-75%, 0, 0)',
            'opacity'			: 0
            });
            $rowR.css({
            '-webkit-transform'	: 'translate3d(75%, 0, 0) rotateY(90deg) translate3d(75%, 0, 0)',
            'opacity'			: 0
            });

            }
                                                                else {

            $rowL.css({ left 		: '-50%' });
            $rowR.css({ right 		: '-50%' });

            }

            }
            // if not, the row should become visible (0% of left/right) as it gets closer to the center of the screen.
            else {

            // row's height
            var rowH	= $row.height(),
            // the value on each scrolling step will be proporcional to the distance from the center of the screen to its height
            factor 	= ( ( ( rowT + rowH / 2 ) - winCenter ) / ( winSize.height / 2 + rowH / 2 ) ),
            // value for the left / right of each side of the row.
            // 0% is the limit
            val		= Math.max( factor * 50, 0 );

            if( val <= 0 ) {

                       // when 0% is reached show the pointer for that row
                       if( !$row.data('pointer') ) {

                       $row.data( 'pointer', true );
                       $row.find('.ss-circle').addClass('ss-circle-deco');

                       }

                       }
                       else {

                       // the pointer should not be shown
                       if( $row.data('pointer') ) {

                       $row.data( 'pointer', false );
                       $row.find('.ss-circle').removeClass('ss-circle-deco');

                       }

                       }

                       // set calculated values
                       if( perspective ) {

                       var t = Math.max( factor * 75, 0 ),
                       r = Math.max( factor * 90, 0 ),
                       o = Math.min( Math.abs( factor - 1 ), 1 );

                       $rowL.css({
                       '-webkit-transform'	: 'translate3d(-' + t + '%, 0, 0) rotateY(-' + r + 'deg) translate3d(-' + t + '%, 0, 0)',
                       'opacity'			: o
                                                                        });
                       $rowR.css({
                       '-webkit-transform'	: 'translate3d(' + t + '%, 0, 0) rotateY(' + r + 'deg) translate3d(' + t + '%, 0, 0)',
                                                                                'opacity'			: o
                       });

                       }
                       else {

                       $rowL.css({ left 	: - val + '%' });
                       $rowR.css({ right 	: - val + '%' });

                       }

                       }

                                                });

                       };

                                return { init : init };

                       })();

                       $sidescroll.init();

                       });
